{"parentUuid":null,"isSidechain":false,"userType":"external","cwd":"/root","sessionId":"9faee80a-4e9d-447a-ae17-cd3fc7354cd2","version":"1.0.35","type":"user","message":{"role":"user","content":"# 1. Verificar PostgreSQL\n  systemctl status postgresql\n  ps aux | grep postgres\n\n  # 2. Verificar servicios corriendo\n  pm2 status\n  docker ps\n\n  # 3. Verificar conexión a base de datos\n  psql -h localhost -U postgres -d moonyetis_production -c \"\\dt\"\n\n  # 4. Verificar APIs de Fractal Bitcoin\n  curl -X POST https://fractal-api.unisat.io/query -H \"Content-Type: application/json\"\n\n  # 5. Verificar logs de la aplicación\n  pm2 logs\n  # o\n  tail -f /var/log/moonyetis/app.log\n"},"uuid":"5d8ce140-935e-485c-9615-f8556a25c409","timestamp":"2025-06-29T19:43:43.893Z"}
{"parentUuid":"5d8ce140-935e-485c-9615-f8556a25c409","isSidechain":false,"userType":"external","cwd":"/root","sessionId":"9faee80a-4e9d-447a-ae17-cd3fc7354cd2","version":"1.0.35","message":{"id":"msg_01RyytqKWbS6uHVKgeufTDUv","type":"message","role":"assistant","model":"claude-sonnet-4-20250514","content":[{"type":"text","text":"I'll run these diagnostic commands to check the MoonYetis system status. Let me execute them in parallel to get a comprehensive view."}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":3,"cache_creation_input_tokens":13527,"cache_read_input_tokens":0,"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CQd5sKWo2ovepDFDM4bhu","type":"assistant","uuid":"2a44c4e5-c0eb-4174-8d7f-999bbda048cb","timestamp":"2025-06-29T19:43:47.214Z"}
{"parentUuid":"2a44c4e5-c0eb-4174-8d7f-999bbda048cb","isSidechain":false,"userType":"external","cwd":"/root","sessionId":"9faee80a-4e9d-447a-ae17-cd3fc7354cd2","version":"1.0.35","message":{"id":"msg_01RyytqKWbS6uHVKgeufTDUv","type":"message","role":"assistant","model":"claude-sonnet-4-20250514","content":[{"type":"tool_use","id":"toolu_01DZreCrE6GH3yA6o27Bfgp7","name":"Bash","input":{"command":"systemctl status postgresql","description":"Check PostgreSQL service status"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":3,"cache_creation_input_tokens":13527,"cache_read_input_tokens":0,"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CQd5sKWo2ovepDFDM4bhu","type":"assistant","uuid":"6bdb30ef-d7a4-4455-ab0b-5e0bd422ba28","timestamp":"2025-06-29T19:43:48.219Z"}
{"parentUuid":"6bdb30ef-d7a4-4455-ab0b-5e0bd422ba28","isSidechain":false,"userType":"external","cwd":"/root","sessionId":"9faee80a-4e9d-447a-ae17-cd3fc7354cd2","version":"1.0.35","message":{"id":"msg_01RyytqKWbS6uHVKgeufTDUv","type":"message","role":"assistant","model":"claude-sonnet-4-20250514","content":[{"type":"tool_use","id":"toolu_019nPVJu1xFvu9LaNnFAyvTw","name":"Bash","input":{"command":"ps aux | grep postgres","description":"Check running PostgreSQL processes"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":3,"cache_creation_input_tokens":13527,"cache_read_input_tokens":0,"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CQd5sKWo2ovepDFDM4bhu","type":"assistant","uuid":"2b73b7d0-77e1-4932-bb63-90890a1ceb55","timestamp":"2025-06-29T19:43:49.315Z"}
{"parentUuid":"2b73b7d0-77e1-4932-bb63-90890a1ceb55","isSidechain":false,"userType":"external","cwd":"/root","sessionId":"9faee80a-4e9d-447a-ae17-cd3fc7354cd2","version":"1.0.35","message":{"id":"msg_01RyytqKWbS6uHVKgeufTDUv","type":"message","role":"assistant","model":"claude-sonnet-4-20250514","content":[{"type":"tool_use","id":"toolu_01Hf4bf2P2PcEaMU6tjxFXoT","name":"Bash","input":{"command":"pm2 status","description":"Check PM2 managed processes"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":3,"cache_creation_input_tokens":13527,"cache_read_input_tokens":0,"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CQd5sKWo2ovepDFDM4bhu","type":"assistant","uuid":"1bddf53b-3c57-44a0-8673-fc58ab04fb6b","timestamp":"2025-06-29T19:43:50.012Z"}
{"parentUuid":"1bddf53b-3c57-44a0-8673-fc58ab04fb6b","isSidechain":false,"userType":"external","cwd":"/root","sessionId":"9faee80a-4e9d-447a-ae17-cd3fc7354cd2","version":"1.0.35","message":{"id":"msg_01RyytqKWbS6uHVKgeufTDUv","type":"message","role":"assistant","model":"claude-sonnet-4-20250514","content":[{"type":"tool_use","id":"toolu_015FNPrwXrUt6gAR9MQfk6sp","name":"Bash","input":{"command":"docker ps","description":"Check running Docker containers"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":3,"cache_creation_input_tokens":13527,"cache_read_input_tokens":0,"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CQd5sKWo2ovepDFDM4bhu","type":"assistant","uuid":"e29b8e21-8bf1-493a-9e7e-6be3e2220286","timestamp":"2025-06-29T19:43:50.074Z"}
{"parentUuid":"e29b8e21-8bf1-493a-9e7e-6be3e2220286","isSidechain":false,"userType":"external","cwd":"/root","sessionId":"9faee80a-4e9d-447a-ae17-cd3fc7354cd2","version":"1.0.35","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01DZreCrE6GH3yA6o27Bfgp7","type":"tool_result","content":"● postgresql.service - PostgreSQL RDBMS\n     Loaded: loaded (/lib/systemd/system/postgresql.service; enabled; vendor preset: enabled)\n     Active: active (exited) since Sat 2025-06-28 22:15:13 UTC; 21h ago\n   Main PID: 2449213 (code=exited, status=0/SUCCESS)\n        CPU: 2ms\n\nJun 28 22:15:13 srv876195 systemd[1]: Starting PostgreSQL RDBMS...\nJun 28 22:15:13 srv876195 systemd[1]: Finished PostgreSQL RDBMS.","is_error":false}]},"uuid":"a427b56f-7505-48fe-bdda-d61a999db1d3","timestamp":"2025-06-29T19:44:14.280Z","toolUseResult":{"stdout":"● postgresql.service - PostgreSQL RDBMS\n     Loaded: loaded (/lib/systemd/system/postgresql.service; enabled; vendor preset: enabled)\n     Active: active (exited) since Sat 2025-06-28 22:15:13 UTC; 21h ago\n   Main PID: 2449213 (code=exited, status=0/SUCCESS)\n        CPU: 2ms\n\nJun 28 22:15:13 srv876195 systemd[1]: Starting PostgreSQL RDBMS...\nJun 28 22:15:13 srv876195 systemd[1]: Finished PostgreSQL RDBMS.","stderr":"","interrupted":false,"isImage":false}}
{"parentUuid":"a427b56f-7505-48fe-bdda-d61a999db1d3","isSidechain":false,"userType":"external","cwd":"/root","sessionId":"9faee80a-4e9d-447a-ae17-cd3fc7354cd2","version":"1.0.35","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_019nPVJu1xFvu9LaNnFAyvTw","type":"tool_result","content":"postgres 2449195  0.0  0.3 218556 29132 ?        Ss   Jun28   0:03 /usr/lib/postgresql/14/bin/postgres -D /var/lib/postgresql/14/main -c config_file=/etc/postgresql/14/main/postgresql.conf\npostgres 2449197  0.0  0.1 218692  9172 ?        Ss   Jun28   0:00 postgres: 14/main: checkpointer \npostgres 2449198  0.0  0.0 218556  6756 ?        Ss   Jun28   0:00 postgres: 14/main: background writer \npostgres 2449199  0.0  0.1 218556 11520 ?        Ss   Jun28   0:00 postgres: 14/main: walwriter \npostgres 2449200  0.0  0.1 219232  9304 ?        Ss   Jun28   0:01 postgres: 14/main: autovacuum launcher \npostgres 2449201  0.0  0.0  73284  7064 ?        Ss   Jun28   0:01 postgres: 14/main: stats collector \npostgres 2449202  0.0  0.0 218988  7464 ?        Ss   Jun28   0:00 postgres: 14/main: logical replication launcher \nroot     2459483  0.0  0.0   7896  3504 ?        Ss   19:44   0:00 /bin/bash -c -l source /tmp/claude-shell-snapshot-0e01 && eval 'ps aux ' \\< /dev/null \\| ' grep postgres' && pwd -P >| /tmp/claude-da5b-cwd\nroot     2459511  0.0  0.0   7008  2120 ?        S    19:44   0:00 grep postgres","is_error":false}]},"uuid":"fa72a74a-0222-4edc-92bd-bf7eda3539f7","timestamp":"2025-06-29T19:44:14.419Z","toolUseResult":{"stdout":"postgres 2449195  0.0  0.3 218556 29132 ?        Ss   Jun28   0:03 /usr/lib/postgresql/14/bin/postgres -D /var/lib/postgresql/14/main -c config_file=/etc/postgresql/14/main/postgresql.conf\npostgres 2449197  0.0  0.1 218692  9172 ?        Ss   Jun28   0:00 postgres: 14/main: checkpointer \npostgres 2449198  0.0  0.0 218556  6756 ?        Ss   Jun28   0:00 postgres: 14/main: background writer \npostgres 2449199  0.0  0.1 218556 11520 ?        Ss   Jun28   0:00 postgres: 14/main: walwriter \npostgres 2449200  0.0  0.1 219232  9304 ?        Ss   Jun28   0:01 postgres: 14/main: autovacuum launcher \npostgres 2449201  0.0  0.0  73284  7064 ?        Ss   Jun28   0:01 postgres: 14/main: stats collector \npostgres 2449202  0.0  0.0 218988  7464 ?        Ss   Jun28   0:00 postgres: 14/main: logical replication launcher \nroot     2459483  0.0  0.0   7896  3504 ?        Ss   19:44   0:00 /bin/bash -c -l source /tmp/claude-shell-snapshot-0e01 && eval 'ps aux ' \\< /dev/null \\| ' grep postgres' && pwd -P >| /tmp/claude-da5b-cwd\nroot     2459511  0.0  0.0   7008  2120 ?        S    19:44   0:00 grep postgres","stderr":"","interrupted":false,"isImage":false}}
{"parentUuid":"fa72a74a-0222-4edc-92bd-bf7eda3539f7","isSidechain":false,"userType":"external","cwd":"/root","sessionId":"9faee80a-4e9d-447a-ae17-cd3fc7354cd2","version":"1.0.35","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01Hf4bf2P2PcEaMU6tjxFXoT","type":"tool_result","content":"┌────┬─────────────────────────┬─────────────┬─────────┬─────────┬──────────┬────────┬──────┬───────────┬──────────┬──────────┬──────────┬──────────┐\n│ id │ name                    │ namespace   │ version │ mode    │ pid      │ uptime │ ↺    │ status    │ cpu      │ mem      │ user     │ watching │\n├────┼─────────────────────────┼─────────────┼─────────┼─────────┼──────────┼────────┼──────┼───────────┼──────────┼──────────┼──────────┼──────────┤\n│ 0  │ moonyetis-production    │ default     │ 1.0.0   │ fork    │ 2457028  │ 2h     │ 3    │ online    │ 0%       │ 82.4mb   │ root     │ disabled │\n└────┴─────────────────────────┴─────────────┴─────────┴─────────┴──────────┴────────┴──────┴───────────┴──────────┴──────────┴──────────┴──────────┘","is_error":false}]},"uuid":"abcad38d-af9f-4cda-8b55-bf2be3bec2e5","timestamp":"2025-06-29T19:44:36.475Z","toolUseResult":{"stdout":"┌────┬─────────────────────────┬─────────────┬─────────┬─────────┬──────────┬────────┬──────┬───────────┬──────────┬──────────┬──────────┬──────────┐\n│ id │ name                    │ namespace   │ version │ mode    │ pid      │ uptime │ ↺    │ status    │ cpu      │ mem      │ user     │ watching │\n├────┼─────────────────────────┼─────────────┼─────────┼─────────┼──────────┼────────┼──────┼───────────┼──────────┼──────────┼──────────┼──────────┤\n│ 0  │ moonyetis-production    │ default     │ 1.0.0   │ fork    │ 2457028  │ 2h     │ 3    │ online    │ 0%       │ 82.4mb   │ root     │ disabled │\n└────┴─────────────────────────┴─────────────┴─────────┴─────────┴──────────┴────────┴──────┴───────────┴──────────┴──────────┴──────────┴──────────┘","stderr":"","interrupted":false,"isImage":false}}
{"parentUuid":"abcad38d-af9f-4cda-8b55-bf2be3bec2e5","isSidechain":false,"userType":"external","cwd":"/root","sessionId":"9faee80a-4e9d-447a-ae17-cd3fc7354cd2","version":"1.0.35","type":"user","message":{"role":"user","content":[{"type":"tool_result","content":"/bin/bash: line 1: docker: command not found","is_error":true,"tool_use_id":"toolu_015FNPrwXrUt6gAR9MQfk6sp"}]},"uuid":"40cdeebc-e022-48c1-890f-1b7dd2832005","timestamp":"2025-06-29T19:44:36.571Z","toolUseResult":"Error: /bin/bash: line 1: docker: command not found"}
{"parentUuid":"40cdeebc-e022-48c1-890f-1b7dd2832005","isSidechain":false,"userType":"external","cwd":"/root","sessionId":"9faee80a-4e9d-447a-ae17-cd3fc7354cd2","version":"1.0.35","message":{"id":"msg_016jnhewZL5DH2M5tj6fviaA","type":"message","role":"assistant","model":"claude-sonnet-4-20250514","content":[{"type":"text","text":"Now let me check the database connection and API availability:"}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":7,"cache_creation_input_tokens":1353,"cache_read_input_tokens":13527,"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CQd5wCgtdXVNM7m4XiaVZ","type":"assistant","uuid":"f441c2cf-24c0-4db1-86e1-d8f6334e39b4","timestamp":"2025-06-29T19:44:39.445Z"}
{"parentUuid":"f441c2cf-24c0-4db1-86e1-d8f6334e39b4","isSidechain":false,"userType":"external","cwd":"/root","sessionId":"9faee80a-4e9d-447a-ae17-cd3fc7354cd2","version":"1.0.35","message":{"id":"msg_016jnhewZL5DH2M5tj6fviaA","type":"message","role":"assistant","model":"claude-sonnet-4-20250514","content":[{"type":"tool_use","id":"toolu_01GuSRqbzLxaLFR1k6dnWKBs","name":"Bash","input":{"command":"psql -h localhost -U postgres -d moonyetis_production -c \"\\dt\"","description":"Check database connection and tables"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":7,"cache_creation_input_tokens":1353,"cache_read_input_tokens":13527,"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CQd5wCgtdXVNM7m4XiaVZ","type":"assistant","uuid":"b2ac4eab-23fd-402e-8394-0195a5832832","timestamp":"2025-06-29T19:44:40.911Z"}
{"parentUuid":"b2ac4eab-23fd-402e-8394-0195a5832832","isSidechain":false,"userType":"external","cwd":"/root","sessionId":"9faee80a-4e9d-447a-ae17-cd3fc7354cd2","version":"1.0.35","message":{"id":"msg_016jnhewZL5DH2M5tj6fviaA","type":"message","role":"assistant","model":"claude-sonnet-4-20250514","content":[{"type":"tool_use","id":"toolu_01Ap4UkmrYLRkxa9zHGFKZo2","name":"Bash","input":{"command":"curl -X POST https://fractal-api.unisat.io/query -H \"Content-Type: application/json\" --connect-timeout 10","description":"Test Fractal Bitcoin API connectivity"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":7,"cache_creation_input_tokens":1353,"cache_read_input_tokens":13527,"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CQd5wCgtdXVNM7m4XiaVZ","type":"assistant","uuid":"b796f1c3-72e2-4c01-8f41-4cfa84458d0c","timestamp":"2025-06-29T19:44:42.525Z"}
{"parentUuid":"b796f1c3-72e2-4c01-8f41-4cfa84458d0c","isSidechain":false,"userType":"external","cwd":"/root","sessionId":"9faee80a-4e9d-447a-ae17-cd3fc7354cd2","version":"1.0.35","message":{"id":"msg_016jnhewZL5DH2M5tj6fviaA","type":"message","role":"assistant","model":"claude-sonnet-4-20250514","content":[{"type":"tool_use","id":"toolu_019GqPPDqEUaCD7m9HTGkqhj","name":"Bash","input":{"command":"pm2 logs --lines 20","description":"Check recent PM2 application logs"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":7,"cache_creation_input_tokens":1353,"cache_read_input_tokens":13527,"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CQd5wCgtdXVNM7m4XiaVZ","type":"assistant","uuid":"5803ec41-78b2-4ae4-88fc-16a32f639939","timestamp":"2025-06-29T19:44:43.183Z"}
{"parentUuid":"5803ec41-78b2-4ae4-88fc-16a32f639939","isSidechain":false,"userType":"external","cwd":"/root","sessionId":"9faee80a-4e9d-447a-ae17-cd3fc7354cd2","version":"1.0.35","type":"user","message":{"role":"user","content":[{"type":"tool_result","content":"Password for user postgres: \npsql: error: connection to server at \"localhost\" (::1), port 5432 failed: fe_sendauth: no password supplied","is_error":true,"tool_use_id":"toolu_01GuSRqbzLxaLFR1k6dnWKBs"}]},"uuid":"694d11b5-ab43-4778-802a-107b6a28333a","timestamp":"2025-06-29T19:44:43.311Z","toolUseResult":"Error: Password for user postgres: \npsql: error: connection to server at \"localhost\" (::1), port 5432 failed: fe_sendauth: no password supplied"}
{"parentUuid":"694d11b5-ab43-4778-802a-107b6a28333a","isSidechain":false,"userType":"external","cwd":"/root","sessionId":"9faee80a-4e9d-447a-ae17-cd3fc7354cd2","version":"1.0.35","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01Ap4UkmrYLRkxa9zHGFKZo2","type":"tool_result","content":"404 page not found\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n\r  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0\r  0    18    0     0    0     0      0      0 --:--:--  0:00:01 --:--:--     0\r100    18  100    18    0     0     14      0  0:00:01  0:00:01 --:--:--    14","is_error":false}]},"uuid":"1629d5cd-70a6-4ab7-8d3c-3d4f55bce372","timestamp":"2025-06-29T19:45:14.864Z","toolUseResult":{"stdout":"404 page not found\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n\r  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0\r  0    18    0     0    0     0      0      0 --:--:--  0:00:01 --:--:--     0\r100    18  100    18    0     0     14      0  0:00:01  0:00:01 --:--:--    14","stderr":"","interrupted":false,"isImage":false}}
{"parentUuid":"1629d5cd-70a6-4ab7-8d3c-3d4f55bce372","isSidechain":false,"userType":"external","cwd":"/root","sessionId":"9faee80a-4e9d-447a-ae17-cd3fc7354cd2","version":"1.0.35","type":"user","message":{"role":"user","content":[{"type":"tool_result","content":"Command timed out after 2m 0.0s\n[TAILING] Tailing last 20 lines for [all] processes (change the value with --lines option)\n/root/.pm2/pm2.log last 20 lines:\nPM2        | 2025-06-28T22:14:19: PM2 error: app=moonyetis-slots id=0 does not have a pid\nPM2        | 2025-06-28T22:14:19: PM2 log: Stopping app:moonyetis-slots id:1\nPM2        | 2025-06-28T22:14:19: PM2 error: app=moonyetis-slots id=1 does not have a pid\nPM2        | 2025-06-28T22:15:24: PM2 log: App [moonyetis-production:0] starting in -fork mode-\nPM2        | 2025-06-28T22:15:24: PM2 log: App [moonyetis-production:0] online\nPM2        | 2025-06-29T16:57:14: PM2 log: Stopping app:moonyetis-production id:0\nPM2        | 2025-06-29T16:57:14: PM2 log: App [moonyetis-production:0] exited with code [0] via signal [SIGINT]\nPM2        | 2025-06-29T16:57:15: PM2 log: pid=2449291 msg=process killed\nPM2        | 2025-06-29T16:57:15: PM2 log: App [moonyetis-production:0] starting in -fork mode-\nPM2        | 2025-06-29T16:57:15: PM2 log: App [moonyetis-production:0] online\nPM2        | 2025-06-29T17:07:11: PM2 log: Stopping app:moonyetis-production id:0\nPM2        | 2025-06-29T17:07:11: PM2 log: App [moonyetis-production:0] exited with code [0] via signal [SIGINT]\nPM2        | 2025-06-29T17:07:11: PM2 log: pid=2455985 msg=process killed\nPM2        | 2025-06-29T17:07:11: PM2 log: App [moonyetis-production:0] starting in -fork mode-\nPM2        | 2025-06-29T17:07:11: PM2 log: App [moonyetis-production:0] online\nPM2        | 2025-06-29T17:16:51: PM2 log: Stopping app:moonyetis-production id:0\nPM2        | 2025-06-29T17:16:51: PM2 log: App [moonyetis-production:0] exited with code [0] via signal [SIGINT]\nPM2        | 2025-06-29T17:16:52: PM2 log: pid=2456461 msg=process killed\nPM2        | 2025-06-29T17:16:52: PM2 log: App [moonyetis-production:0] starting in -fork mode-\nPM2        | 2025-06-29T17:16:52: PM2 log: App [moonyetis-production:0] online\n\n/root/.pm2/logs/moonyetis-production-out.log last 20 lines:\n0|moonyeti | \n0|moonyeti | ✅ Server: http://0.0.0.0:3000\n0|moonyeti | 📱 Frontend: http://0.0.0.0:3000\n0|moonyeti | 🧪 Test Suite: http://0.0.0.0:3000/test-advanced-wallet.html\n0|moonyeti | 🔌 WebSocket: ws://0.0.0.0:3000/ws\n0|moonyeti | \n0|moonyeti | 🎯 PRODUCTION FEATURES ENABLED:\n0|moonyeti |    ✅ Compression (Gzip)\n0|moonyeti |    ✅ Security headers (Helmet)\n0|moonyeti |    ✅ Rate limiting\n0|moonyeti |    ✅ Static file caching\n0|moonyeti |    ✅ WebSocket notifications\n0|moonyeti |    ✅ Audio system\n0|moonyeti |    ✅ User settings\n0|moonyeti |    ✅ Audit logging\n0|moonyeti |    ✅ Error handling\n0|moonyeti | \n0|moonyeti | 🎮 Ready for Production Traffic!\n0|moonyeti | \n0|moonyeti | ✅ Redis cache connected\n\n/root/.pm2/logs/moonyetis-production-error.log last 20 lines:\n0|moonyeti | ⚠️  No encrypted credentials file found\n0|moonyeti | ❌ Failed to get house wallet credentials: House wallet credentials not found\n0|moonyeti | ⚠️  Using fallback database credentials from environment\n0|moonyeti | ❌ Failed to load secure credentials: House wallet credentials not found\n0|moonyeti | ⚠️  Falling back to environment variables (INSECURE)\n0|moonyeti | ❌ Database connection failed: The server does not support SSL connections\n0|moonyeti | Error: The server does not support SSL connections\n0|moonyeti |     at /var/www/moonyetis-slots/node_modules/pg-pool/index.js:45:11\n0|moonyeti |     at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n0|moonyeti |     at async Database.init (/var/www/moonyetis-slots/config/database.js:70:22)\n0|moonyeti | ValidationError: The 'X-Forwarded-For' header is set but the Express 'trust proxy' setting is false (default). This could indicate a misconfiguration which would prevent express-rate-limit from accurately identifying users. See https://express-rate-limit.github.io/ERR_ERL_UNEXPECTED_X_FORWARDED_FOR/ for more information.\n0|moonyeti |     at Object.xForwardedForHeader (/var/www/moonyetis-slots/node_modules/express-rate-limit/dist/index.cjs:185:13)\n0|moonyeti |     at wrappedValidations.<computed> [as xForwardedForHeader] (/var/www/moonyetis-slots/node_modules/express-rate-limit/dist/index.cjs:397:22)\n0|moonyeti |     at Object.keyGenerator (/var/www/moonyetis-slots/node_modules/express-rate-limit/dist/index.cjs:658:20)\n0|moonyeti |     at /var/www/moonyetis-slots/node_modules/express-rate-limit/dist/index.cjs:710:32\n0|moonyeti |     at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n0|moonyeti |     at async /var/www/moonyetis-slots/node_modules/express-rate-limit/dist/index.cjs:691:5 {\n0|moonyeti |   code: 'ERR_ERL_UNEXPECTED_X_FORWARDED_FOR',\n0|moonyeti |   help: 'https://express-rate-limit.github.io/ERR_ERL_UNEXPECTED_X_FORWARDED_FOR/'\n0|moonyeti | }","is_error":true,"tool_use_id":"toolu_019GqPPDqEUaCD7m9HTGkqhj"}]},"uuid":"eff5f779-b747-464c-b200-3c17981ee944","timestamp":"2025-06-29T19:47:19.402Z","toolUseResult":"Error: Command timed out after 2m 0.0s\n[TAILING] Tailing last 20 lines for [all] processes (change the value with --lines option)\n/root/.pm2/pm2.log last 20 lines:\nPM2        | 2025-06-28T22:14:19: PM2 error: app=moonyetis-slots id=0 does not have a pid\nPM2        | 2025-06-28T22:14:19: PM2 log: Stopping app:moonyetis-slots id:1\nPM2        | 2025-06-28T22:14:19: PM2 error: app=moonyetis-slots id=1 does not have a pid\nPM2        | 2025-06-28T22:15:24: PM2 log: App [moonyetis-production:0] starting in -fork mode-\nPM2        | 2025-06-28T22:15:24: PM2 log: App [moonyetis-production:0] online\nPM2        | 2025-06-29T16:57:14: PM2 log: Stopping app:moonyetis-production id:0\nPM2        | 2025-06-29T16:57:14: PM2 log: App [moonyetis-production:0] exited with code [0] via signal [SIGINT]\nPM2        | 2025-06-29T16:57:15: PM2 log: pid=2449291 msg=process killed\nPM2        | 2025-06-29T16:57:15: PM2 log: App [moonyetis-production:0] starting in -fork mode-\nPM2        | 2025-06-29T16:57:15: PM2 log: App [moonyetis-production:0] online\nPM2        | 2025-06-29T17:07:11: PM2 log: Stopping app:moonyetis-production id:0\nPM2        | 2025-06-29T17:07:11: PM2 log: App [moonyetis-production:0] exited with code [0] via signal [SIGINT]\nPM2        | 2025-06-29T17:07:11: PM2 log: pid=2455985 msg=process killed\nPM2        | 2025-06-29T17:07:11: PM2 log: App [moonyetis-production:0] starting in -fork mode-\nPM2        | 2025-06-29T17:07:11: PM2 log: App [moonyetis-production:0] online\nPM2        | 2025-06-29T17:16:51: PM2 log: Stopping app:moonyetis-production id:0\nPM2        | 2025-06-29T17:16:51: PM2 log: App [moonyetis-production:0] exited with code [0] via signal [SIGINT]\nPM2        | 2025-06-29T17:16:52: PM2 log: pid=2456461 msg=process killed\nPM2        | 2025-06-29T17:16:52: PM2 log: App [moonyetis-production:0] starting in -fork mode-\nPM2        | 2025-06-29T17:16:52: PM2 log: App [moonyetis-production:0] online\n\n/root/.pm2/logs/moonyetis-production-out.log last 20 lines:\n0|moonyeti | \n0|moonyeti | ✅ Server: http://0.0.0.0:3000\n0|moonyeti | 📱 Frontend: http://0.0.0.0:3000\n0|moonyeti | 🧪 Test Suite: http://0.0.0.0:3000/test-advanced-wallet.html\n0|moonyeti | 🔌 WebSocket: ws://0.0.0.0:3000/ws\n0|moonyeti | \n0|moonyeti | 🎯 PRODUCTION FEATURES ENABLED:\n0|moonyeti |    ✅ Compression (Gzip)\n0|moonyeti |    ✅ Security headers (Helmet)\n0|moonyeti |    ✅ Rate limiting\n0|moonyeti |    ✅ Static file caching\n0|moonyeti |    ✅ WebSocket notifications\n0|moonyeti |    ✅ Audio system\n0|moonyeti |    ✅ User settings\n0|moonyeti |    ✅ Audit logging\n0|moonyeti |    ✅ Error handling\n0|moonyeti | \n0|moonyeti | 🎮 Ready for Production Traffic!\n0|moonyeti | \n0|moonyeti | ✅ Redis cache connected\n\n/root/.pm2/logs/moonyetis-production-error.log last 20 lines:\n0|moonyeti | ⚠️  No encrypted credentials file found\n0|moonyeti | ❌ Failed to get house wallet credentials: House wallet credentials not found\n0|moonyeti | ⚠️  Using fallback database credentials from environment\n0|moonyeti | ❌ Failed to load secure credentials: House wallet credentials not found\n0|moonyeti | ⚠️  Falling back to environment variables (INSECURE)\n0|moonyeti | ❌ Database connection failed: The server does not support SSL connections\n0|moonyeti | Error: The server does not support SSL connections\n0|moonyeti |     at /var/www/moonyetis-slots/node_modules/pg-pool/index.js:45:11\n0|moonyeti |     at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n0|moonyeti |     at async Database.init (/var/www/moonyetis-slots/config/database.js:70:22)\n0|moonyeti | ValidationError: The 'X-Forwarded-For' header is set but the Express 'trust proxy' setting is false (default). This could indicate a misconfiguration which would prevent express-rate-limit from accurately identifying users. See https://express-rate-limit.github.io/ERR_ERL_UNEXPECTED_X_FORWARDED_FOR/ for more information.\n0|moonyeti |     at Object.xForwardedForHeader (/var/www/moonyetis-slots/node_modules/express-rate-limit/dist/index.cjs:185:13)\n0|moonyeti |     at wrappedValidations.<computed> [as xForwardedForHeader] (/var/www/moonyetis-slots/node_modules/express-rate-limit/dist/index.cjs:397:22)\n0|moonyeti |     at Object.keyGenerator (/var/www/moonyetis-slots/node_modules/express-rate-limit/dist/index.cjs:658:20)\n0|moonyeti |     at /var/www/moonyetis-slots/node_modules/express-rate-limit/dist/index.cjs:710:32\n0|moonyeti |     at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n0|moonyeti |     at async /var/www/moonyetis-slots/node_modules/express-rate-limit/dist/index.cjs:691:5 {\n0|moonyeti |   code: 'ERR_ERL_UNEXPECTED_X_FORWARDED_FOR',\n0|moonyeti |   help: 'https://express-rate-limit.github.io/ERR_ERL_UNEXPECTED_X_FORWARDED_FOR/'\n0|moonyeti | }"}
{"parentUuid":"eff5f779-b747-464c-b200-3c17981ee944","isSidechain":false,"userType":"external","cwd":"/root","sessionId":"9faee80a-4e9d-447a-ae17-cd3fc7354cd2","version":"1.0.35","message":{"id":"msg_019qAWGdWk1Br5QUhmRx3sHE","type":"message","role":"assistant","model":"claude-sonnet-4-20250514","content":[{"type":"text","text":"Let me also check for application logs in the typical log directory:"}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":7,"cache_creation_input_tokens":2467,"cache_read_input_tokens":14880,"output_tokens":3,"service_tier":"standard"}},"requestId":"req_011CQd69D4JMs6eJgzbXJGdh","type":"assistant","uuid":"972f5351-3034-49dc-a026-122b091ad067","timestamp":"2025-06-29T19:47:22.210Z"}
{"parentUuid":"972f5351-3034-49dc-a026-122b091ad067","isSidechain":false,"userType":"external","cwd":"/root","sessionId":"9faee80a-4e9d-447a-ae17-cd3fc7354cd2","version":"1.0.35","message":{"id":"msg_019qAWGdWk1Br5QUhmRx3sHE","type":"message","role":"assistant","model":"claude-sonnet-4-20250514","content":[{"type":"tool_use","id":"toolu_01VZgooSsQWNaqPGUs2kwPVR","name":"Bash","input":{"command":"ls -la /var/log/ | grep moonyetis","description":"Check for MoonYetis log directory"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":7,"cache_creation_input_tokens":2467,"cache_read_input_tokens":14880,"output_tokens":3,"service_tier":"standard"}},"requestId":"req_011CQd69D4JMs6eJgzbXJGdh","type":"assistant","uuid":"17424920-2feb-4f7f-92c3-171bb1f053f7","timestamp":"2025-06-29T19:47:23.404Z"}
{"parentUuid":"17424920-2feb-4f7f-92c3-171bb1f053f7","isSidechain":false,"userType":"external","cwd":"/root","sessionId":"9faee80a-4e9d-447a-ae17-cd3fc7354cd2","version":"1.0.35","message":{"id":"msg_019qAWGdWk1Br5QUhmRx3sHE","type":"message","role":"assistant","model":"claude-sonnet-4-20250514","content":[{"type":"tool_use","id":"toolu_01X7j2SPzZyc84BsTYCvtvcj","name":"Bash","input":{"command":"find /var -name \"*moonyetis*\" -type f -name \"*.log\" 2>/dev/null | head -10","description":"Search for MoonYetis log files"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":7,"cache_creation_input_tokens":2467,"cache_read_input_tokens":14880,"output_tokens":3,"service_tier":"standard"}},"requestId":"req_011CQd69D4JMs6eJgzbXJGdh","type":"assistant","uuid":"59cd67b2-c4b2-4a83-95e5-fa2f4cb256cc","timestamp":"2025-06-29T19:47:24.701Z"}
